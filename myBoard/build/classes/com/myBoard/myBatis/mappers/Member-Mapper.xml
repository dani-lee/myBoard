<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="Member-Mapper">
	
	<select id="selectMemberList" resultType="member">
		select
		ID,
		PWD,
		EMAIL,
		PICTURE,
		ENABLED,
		REGDATE,
		PHONE,
		NAME,
		REGISTER,
		ADDRESS,
		AUTHORITY
		from
		member
	</select>
	
	<select id="selectMemberListCount" resultType="int">
		select count(*) from member
	</select>
	
	
	<sql id="search">
		<if test="searchType == 'i'.toString()">
			and id like '%' || #{keyword} || '%'
 		</if>
 		<if test="searchType == 'p'.toString()">
			and phone like '%' || #{keyword} || '%'
 		</if>
 		<if test="searchType == 'e'.toString()">
			and email like '%' || #{keyword} || '%'
 		</if>
 		<if test="searchType == 'n'.toString()">
			and name like '%' || #{keyword} || '%'
 		</if>
	</sql>
	<select id="selectSearchMemberList" resultType="member">
		select * from member
		where id is not null
		<include refid="search" />
		order by regDate desc
	</select>
	<select id="selectSearchMemberListCount" resultType="int">
		select count(*) from member
		where id is not null
		<include refid="search" />
	</select>	
	
	
	
	
	<insert id="insertMember" parameterType="member">
		insert into member(ID, PWD, EMAIL, regdate, phone, name, register,address,AUTHORITY)
			values(#{id}, #{pwd}, #{email}, #{regDate}, #{phone},  #{name},#{register},#{address},#{authority})
	</insert>
	
	
	<delete id="deleteMember" parameterType="String">
		delete member
			where id = #{id}
	</delete>
	
	<select id="getDetailMember" parameterType="String" resultType="member">
		select * from member
			where id = #{id}
	</select>
	
	<update id="updateMember" parameterType="member">
		update member
			set id = #{id},
				pwd = #{pwd},
				email = #{email},
				enabled = #{enabled},
				phone = #{phone},
				regdate = #{regDate},
				name = #{name},
				register = #{register},
				address = #{address},
				authority = #{authority}
			where id = #{id}
	</update>
	
	
	
		
 </mapper>