<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="Member-Mapper">
	
	<select id="selectMemberList" resultType="member">
		select
		ID,
		PWD,
		EMAIL,
		PICTURE,
		ENABLED,
		REGDATE,
		PHONE,
		NAME,
		REGISTER,
		ADDRESS,
		AUTHORITY
		from
		member
	</select>
	
	<insert id="insertMember" parameterType="member">
		insert into member(ID, PWD, EMAIL, regdate, phone, name, register,address,AUTHORITY)
			values(#{id}, #{pwd}, #{email}, #{regDate}, #{phone},  #{name},#{register},#{address},#{authority})
	</insert>
	
	<select id="getAllMember" parameterType="pagingVO" resultType="member">
	
		select AA.*
	    		from (select rownum as rnum,
	       					 A.*
	    				from (select * from member) A) AA
	    		where AA.rnum between #{firstRecNo} and #{lastRecNo}
	</select>
	
	<select id="getTotalCount" resultType="int">
		select count(*) from member
	</select>
	
	<delete id="deleteMember" parameterType="String">
		delete member
			where id = #{id}
	</delete>
	
	<select id="getDetailMember" parameterType="String" resultType="member">
		select * from member
			where id = #{id}
	</select>
	
	<update id="updateMember" parameterType="member">
		update member
			set id = #{id},
				pwd = #{pwd},
				email = #{email},
				enabled = #{enabled},
				phone = #{phone},
				regdate = #{regDate},
				name = #{name},
				register = #{register},
				address = #{address},
				authority = #{authority}
			where id = #{id}
	</update>
	
	<select id="searchMember" parameterType="member" resultType="member">
		select * from member
			where 1 = 1
			<if test="id != ''">
				AND id LIKE '%'|| #id# ||'%'
			</if>
			<if test="name != ''">
				AND name LIKE '%'|| #name# ||'%'
			</if>
			<if test="phone != ''">
				AND phone LIKE '%'|| #phone# ||'%'
			</if>
			<if test="email != ''">
				AND email LIKE '%'|| #email# ||'%'
			</if>
 	</select>
	
		
 </mapper>